<!DOCTYPE html>
<html>
    <head>
        <title>Singularity</title>
        <script type="text/javascript">
            var recognition = new webkitSpeechRecognition({continuous:true});
            recognition.onresult = function(event) {
                for (var i=0; i < event.results.length; i++) {
                    console.log(event.results[i][0].transcript);
                }
                if (event.results.length > 0) {
                    var input = event.results[0][0].transcript;
                    document.getElementById("recognition_result").innerHTML = event.results[0][0].transcript;
                    
                    var host = "http://127.0.0.1:5555/text/" + encodeURIComponent(input);
                    
                    var xmlhttp = new XMLHttpRequest();
                    
                    xmlhttp.open("GET",host,true);
                    xmlhttp.send(null);
                }
            }
            recognition.start();
        </script>
    </head>
    
    <body>
        <p id="recognition_result"></p>
    </body>
</html>